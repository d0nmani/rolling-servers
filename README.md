# Cocktail Demo
## ログイン
## 言語変更
## マニュアル
## サービス
## アプリケーションマップ
## ビルド
メインメニューの「サービス」を選択し、「ビルド管理」をクリックします。「ビルド管理」画面で右上の「ビルド作成」をクリックします。下記のGithubのソースコードを使用してビルドを実行します。
- リポジトリURL: github.com/sanghee911/rolling-servers.git
- 以下のDockerfileを使用します。
```dockerfile
FROM node:carbon-slim
WORKDIR /usr/src/app
COPY repo/src/package*.json ./
RUN npm install
COPY repo/src .
ENV COLOR azure
EXPOSE 8000
CMD [ "node", "server" ]
```
## デプロイ
メインメニューの「サービス」を選択し、アプリケーションをデプロイする「アプリケーションマップ」をクリックします。「アプリケーションマップマップ」画面でグループのタイトルバーの右端にある「＋」ボタンをクリックします。以下の内容を入力または選択します。
#### サーバー基本情報
- サーバー名: rolling-servers
- グループ: Default
- タイプ: Multi
- 説明: デモアプリケーション
#### コンテナ
- コンテナ名: rolling-servers
- ビルド選択: rolling-servers
#### サービスポート
- コンテナ: rolling-servers
- ポートタイプ: Node Port
- ポート名: express
- ターゲットポート: 8000
- ポート: 8000
- 指定: チェック
- ノードポート: 32000
作成されたサーバーのIPをクリックしてサービスを確認します。
## セルフヒーリング
モニタリング画面でサーバーを削除し、新しいサーバーが自動的に作成されサービスに中断がないことを確認します。
## オートスケーリング
サーバー名をクリックし「インスタンスポリシー」を変更します。「インスタンス数」を「3」に変更します。
## ロードバランシング
モニタリング画面でサービスをしているサーバーを削除します。サービスが無中断で他のサーバーに移動することを確認します。
```bash
while true; do curl -s http://35.187.192.84:32000/ | grep rolling; sleep 1; done
```
## ローリングアップデート
サーバー名を選択し、「コンテナ名」をクリックします。「コンテナ」画面で「環境変数」タブを選択し、以下の環境変数を追加します。
- キー: COLOR, 値: skyblue
## オンラインリソース変更
サーバー名を選択し、「コンテナ名」をクリックします。「コンテナ」画面で「基本情報」タブを選択し、以下のようにリソースを変更します。
- CPU
  - リクエスト: 50
  - 制限: 100
- Memory
  - リクエスト: 50
  - 制限: 100
## ビルド&デプロイ
Githubでソースコードを変更してビルド&デプロイを実行します。
## ロールバック
パイプライン画面から以前のバージョンにロールバックします。
## カタログ
ショッピングモールアプリケーションをデプロイします。
## モニタリング
## アラーム
